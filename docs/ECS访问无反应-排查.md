# ECS 访问 http://47.237.69.93/login.html 没有任何反应 — 排查

## 1. 先确认安全组（最常见原因）

外网访问 ECS 必须放行端口，否则会一直“没反应”或超时。

1. 登录 **阿里云控制台** → **ECS** → 找到实例 `47.237.69.93`。
2. 点进该实例 → **安全组** → **配置规则** → **入方向**。
3. 确认有放行：
   - **80**（若用 Nginx 访问）
   - **3000**（若用 Node 直接访问）
4. 端口、协议、授权对象（如 `0.0.0.0/0` 表示所有 IP）保存后生效。

**建议**：先加一条 **3000** 入方向，授权 `0.0.0.0/0`，然后在浏览器访问：

- **http://47.237.69.93:3000/login.html**

若这样能打开，说明应用正常，只是 80 或 Nginx 未配置好。

---

## 2. 确认应用在 ECS 上已启动

SSH 登录 ECS 后执行：

```bash
# 本机登录
ssh root@47.237.69.93

# 在 ECS 上
curl -s http://127.0.0.1:3000/health
```

- 若有 JSON 返回（如 `{"status":"ok",...}`）→ 应用在跑，问题多半是安全组或 Nginx。
- 若连不上 → 应用没起来，需要先启动：

```bash
cd /opt/test
npm install
npm run build
nohup node dist/main.js > /tmp/team-app.log 2>&1 &
```

---

## 3. 若用 Nginx（访问 80 端口）

- 确认 Nginx 里 `proxy_pass` 指到 `http://127.0.0.1:3000`。
- 改完配置后执行：`sudo nginx -t && sudo systemctl reload nginx`。
- 安全组入方向要放行 **80**。

---

## 4. 小结

| 现象           | 优先检查                         |
|----------------|----------------------------------|
| 完全没反应/超时 | 安全组是否放行 **80** 或 **3000** |
| 502            | 应用是否在跑、Nginx 是否转发正确  |
| 能访问 3000，不能访问 80 | Nginx 配置与 80 安全组 |

先按第 1 步放行 **3000**，试 **http://47.237.69.93:3000/login.html**；有反应后再配置 80 或 Nginx。
